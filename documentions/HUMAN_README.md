# Asissto-v2 - Система автоматизации коммуникаций

## Обзор проекта

Asissto-v2 - это комплексная система для автоматизации коммуникаций с клиентами через различные каналы связи. Система позволяет создавать и управлять AI-ассистентами, которые могут общаться с клиентами через различные каналы (SMS, Email, VK, Telegram и др.).

## Основные возможности

1. **Управление ассистентами**

   - Создание и настройка AI-ассистентов
   - Загрузка и управление базой знаний
   - Настройка промптов и инструкций
   - Интеграция с OpenAI API

2. **Мультиканальность**

   - Поддержка различных каналов связи (SMS, Email, VK, Telegram)
   - Единый интерфейс управления всеми каналами
   - Настройка параметров для каждого канала

3. **Система пользователей**

   - Регистрация и авторизация
   - Различные роли (user, admin, referral, manager)
   - Тарифные планы и система оплаты
   - Реферальная система

4. **Аналитика и мониторинг**
   - Отслеживание статистики использования
   - Мониторинг эффективности ассистентов
   - Анализ тем и трендов в коммуникациях

## Технический стек

- **Frontend**: Next.js, React, Tailwind CSS
- **Backend**: Node.js, tRPC
- **База данных**: PostgreSQL
- **ORM**: Drizzle ORM
- **AI**: OpenAI API
- **Аутентификация**: JWT

## Структура базы данных

### Основные таблицы

1. **users** - Пользователи системы

   - Основные поля: id, name, email, phone, role, status
   - Дополнительные поля: plan, referrerId, managerId, balance

2. **assistants** - AI-ассистенты

   - Основные поля: id, name, description, role, status
   - Настройки: prompt, settings, instructions, model

3. **channels** - Каналы коммуникации

   - Основные поля: id, name, type, status
   - Настройки: settings (JSON)

4. **conversations** - Диалоги

   - Основные поля: id, channelId, assistantId, userId
   - Статус и временные метки

5. **messages** - Сообщения
   - Основные поля: id, conversationId, senderId, content
   - Метаданные и временные метки

## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Настройте переменные окружения в файле `.env`
4. Запустите миграции базы данных
5. Запустите сервер:
   ```bash
   npm run dev
   ```

## API Endpoints

Основные эндпоинты доступны через tRPC:

- `/api/trpc/users.*` - Управление пользователями
- `/api/trpc/assistants.*` - Управление ассистентами
- `/api/trpc/channels.*` - Управление каналами
- `/api/trpc/conversations.*` - Управление диалогами

## Безопасность

- Все пароли хэшируются перед сохранением
- JWT токены для аутентификации
- Ролевая система доступа
- Валидация всех входных данных через Zod

## Мониторинг и логирование

- Система логирует все действия пользователей
- Отслеживание метрик использования
- Мониторинг производительности ассистентов

## Разработка

### Структура проекта

```
.
├── client/          # Frontend код
├── server/          # Backend код
├── shared/          # Общие типы и схемы
├── migrations/      # Миграции базы данных
└── documentions/    # Документация
```

### Стиль кода

- TypeScript для типизации
- ESLint для линтинга
- Prettier для форматирования

## Поддержка

При возникновении проблем:

1. Проверьте логи
2. Обратитесь к документации
3. Создайте issue в репозитории
